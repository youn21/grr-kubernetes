---
header-includes:
    - '\usetheme[titleformat=smallcaps,numbering=none,progressbar=frametitle]{metropolis}'
    - '\usepackage[fixed]{fontawesome5}'
    - '\definecolor{links}{HTML}{661100}'
    - '\hypersetup{colorlinks,linkcolor=,urlcolor=links}'
title: Gestion des secrets avec Kubernetes
subtitle: ""
author: Rémi Cailletaud
date: 15 octobre 2024
institute: ANF Mathrice 2024
#titlegraphic: '`{\hfill\includegraphics[height=1.5cm]{LOGO-JRES-2022.png}`{=latex}'
aspectratio: 169
---

# Les secrets dans l'API Kubernetes

:::::::::::::: {.columns}
::: {.column width="60%"}
* Stockage et gestion des informations sensibles
* Découplage de la définition du pod
  * Réduit le risque d'exposition
  * Stockage en tmpfs
  * Exclusion du SCM (aka gitignoring)
* Utilisation
  * En tant que volume et fichiers
  * En tant que variables d'environnement
:::
::: {.column width="40%"}
\small
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: Ym91aWxsYWJhaXNzZQo=
```
:::
:::::::::::::::

# Le point de vu de l'administrateur

:::::::::::::: {.columns}
::: {.column width="40%"}
![~~chiffrement~~ encodage base64](./meme.jpg){width=200px}
:::
::: {.column width="60%"}
Les secrets sont en clair dans l'API store (*etcd*) !

* RKE2 : encryption at rest des secrets automatique
* OKD: pas le cas pas par défaut !
:::
:::::::::::::::

# Quelques solutions

# Level 0: création à la main

# Level 1: chiffrement par clé asymétrique

# Level 2: délégation du chiffrement

# Level 3: injection des secrets via sidecar

# Conclusion...

À vous !
